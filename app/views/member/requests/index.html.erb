<% @page_title = "予約申請一覧" %>

<div class="container">

<h2><%= @page_title %></h2>

<%= link_to 'apply', new_request_path, class: 'btn btn-primary' %>

<br>
<br>

<table class="table table-bordered">
<thead>
 <tr>
  <th class="info">イベント予定日</th>
  <th class="info">イベントジャンル</th>
  <th class="info">イベント</th>
  <th class="info">イベント詳細</th>
  <th class="info">責任者</th>
  <th class="info">人数</th>
  <th class="info">協力会社</th>
  <th class="info">状態</th>
  <th class="info"></th>
 </tr>
</thead>

<tbody>
 <% @requests.each do |request| %>
   <tr>
  <td>
      <%= request.start_day.strftime("%Y年%m月%d日 %H:%M") %>
      <span>〜</span>
      <%= request.finish_day.strftime("%Y年%m月%d日 %H:%M") %>
  </td>
  <td><%= request.event_genre.name %></td>
  <td><%= request.title %></td>
  <td><%= request.body %></td>
  <td><%= request.chief_name %></td>
  <td><%= request.people %></td>
  <td><%= request.help %></td>
  <td><%= request.approval_status %></td>
  <!--承認ステータスが否認の場合-->
 <% if request.approval_status == "denial" %>
  <td>
      <%= link_to 'edit', edit_request_path(request), class: 'btn-sm btn-primary' %>
      <%= link_to 'delete', request_path(request), class: 'btn-sm btn-danger', method: :delete, "data-confirm" => "本当に削除しますか？" %>
  </td>
  <!--承認ステータスが否認の場合-->

  <!--承認ステータスが承認の場合-->
 <% elsif request.approval_status == "approval" %>
  <td>
      <%#= link_to 'report', new_report_path(request), class: 'btn-sm btn-success' %>
  </td>
 <!--承認ステータスが対応中の場合-->
 <% else %>
  <td></td>
 <% end %>
 </tr>
 <% end %>
</tbody>
</table>
